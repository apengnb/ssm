<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace命名空间，指向UserDao全路径 -->
<mapper namespace="com.briup.dao.UserCollectionDao">
    <!-- UserCollection findByUserCollection(Integer uid,Integer aid); -->
    <select id="findByUserCollection" parameterType="java.lang.Integer"
        resultType="UserCollection">
        select * 
        from "user_collection" 
        where "user_id"=#{uid} and "article_id"=#{aid}
    </select>

    <!-- void addUserCollection(UserCollection userCollection); -->
    <insert id="addUserCollection" parameterType="UserCollection">
       <selectKey keyProperty="id" order="BEFORE" resultType="java.lang.Integer">
           select collection_sequence.nextval from dual
       </selectKey>
       insert into "user_collection"("id","collection_date","state","user_id","article_id")
       values(#{id},#{collectionDate},#{state},#{user.id},#{article.id})
    </insert>
    
    <!-- void updateUserCollection(UserCollection userCollection); -->
    <update id="updateUserCollection" parameterType="UserCollection">
        update "user_collection" 
        set "collection_date"=#{collectionDate},"state"=#{state} 
        where "user_id"=#{user.id} and "article_id"=#{article.id} 
    </update>
    
</mapper>